<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Sonar Search</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography,line-clamp"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              brand: '#0ea5e9',
            },
            boxShadow: {
              glow: '0 0 0 1px rgba(255,255,255,0.06), 0 10px 30px rgba(0,0,0,0.35)'
            }
          }
        }
      }
    </script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="min-h-screen bg-zinc-950 text-zinc-100 selection:bg-cyan-600/30">
    <header class="sticky top-0 z-20 border-b border-white/10 bg-zinc-900/70 backdrop-blur">
      <div class="mx-auto flex max-w-5xl items-center justify-between px-4 py-3">
        <div class="flex items-center gap-3">
          <span class="inline-block h-2.5 w-2.5 rounded-full bg-gradient-to-br from-cyan-400 to-blue-500 shadow-[0_0_16px] shadow-cyan-400"></span>
          <span class="text-sm font-semibold tracking-wide text-zinc-200">Sonar Search</span>
        </div>
        <button id="apiKeyBtn" class="inline-grid h-9 w-9 place-items-center rounded-lg border border-white/10 bg-zinc-800 hover:bg-zinc-700" title="API key settings" aria-label="API key settings">
          <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true" class="text-zinc-200">
            <path d="M19.14,12.94a7.14,7.14,0,0,0,0-1.88l2-1.55a.5.5,0,0,0,.12-.66l-1.9-3.29a.5.5,0,0,0-.61-.22l-2.35,1a7.53,7.53,0,0,0-1.63-.95l-.36-2.49A.5.5,0,0,0,13.93,2H10.07a.5.5,0,0,0-.49.41L9.22,4.9A7.53,7.53,0,0,0,7.59,5.85l-2.35-1a.5.5,0,0,0-.61.22L2.73,8.33a.5.5,0,0,0,.12.66l2,1.55a7.14,7.14,0,0,0,0,1.88l-2,1.55a.5.5,0,0,0-.12.66l1.9,3.29a.5.5,0,0,0,.61.22l2.35-1a7.53,7.53,0,0,0,1.63.95l.36,2.49a.5.5,0,0,0,.49.41h3.86a.5.5,0,0,0,.49-.41l.36-2.49a7.53,7.53,0,0,0,1.63-.95l2.35,1a.5.5,0,0,0,.61-.22l1.9-3.29a.5.5,0,0,0-.12-.66ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/>
          </svg>
        </button>
      </div>
    </header>

    <main class="mx-auto max-w-3xl px-4 py-8">
      <div class="segmented mb-4 inline-flex rounded-xl border border-white/10 bg-zinc-900 p-1 text-sm" role="tablist" aria-label="Result mode">
        <button class="seg active inline-flex items-center rounded-lg px-3 py-1.5 text-zinc-200 hover:bg-zinc-800" data-mode="answer" role="tab" aria-selected="true">Answer</button>
        <button class="seg inline-flex items-center rounded-lg px-3 py-1.5 text-zinc-400 hover:bg-zinc-800" data-mode="sources" role="tab" aria-selected="false">Sources</button>
      </div>

      <form id="searchForm" class="grid grid-cols-1 gap-3 sm:grid-cols-[1fr_auto]" autocomplete="off">
        <input id="queryInput" type="text" placeholder="Ask anything with Sonar..." aria-label="Search query" class="h-14 w-full rounded-xl border border-white/10 bg-zinc-900 px-4 text-zinc-100 placeholder:text-zinc-500 outline-none focus:ring-2 focus:ring-cyan-600/40" />
        <button id="submitBtn" class="h-14 rounded-xl bg-gradient-to-b from-cyan-500 to-blue-600 font-semibold text-white shadow-glow hover:brightness-110 sm:px-5" type="submit" aria-label="Search">Search</button>
      </form>

      <p id="hint" class="mt-2 text-sm text-zinc-500">Tip: press Enter to search. Store your API key in the gear menu.</p>

      <section id="results" class="mt-6 grid gap-4" aria-live="polite"></section>
    </main>

    <div id="toast" class="toast fixed bottom-4 left-1/2 z-50 -translate-x-1/2 rounded-xl border border-white/10 bg-zinc-900 px-3 py-2 text-sm text-zinc-100 shadow-glow" role="status" aria-live="assertive"></div>

    <dialog id="apiKeyDialog" class="modal">
      <form method="dialog" class="modal-card w-[min(92vw,520px)] rounded-2xl border border-white/10 bg-zinc-900 p-4 shadow-glow" id="apiKeyForm">
        <h2 class="text-lg font-semibold">Perplexity API key</h2>
        <p class="muted mt-1 text-sm text-zinc-400">Your key is stored locally in your browser (personal use).</p>
        <label class="field mt-3 grid gap-2">
          <span class="text-sm text-zinc-300">API key</span>
          <div class="input-with-action grid grid-cols-[1fr_auto] gap-2">
            <input id="apiKeyInput" type="password" placeholder="pplx-..." spellcheck="false" autocomplete="off" class="h-11 rounded-xl border border-white/10 bg-zinc-800 px-3 text-zinc-100 outline-none focus:ring-2 focus:ring-cyan-600/40" />
            <button type="button" id="toggleKeyVis" class="icon-btn inline-grid h-11 w-11 place-items-center rounded-xl border border-white/10 bg-zinc-800 text-zinc-200 hover:bg-zinc-700" title="Show / hide">
              <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor" aria-hidden="true">
                <path d="M12 5C7 5 2.73 8.11 1 12c1.73 3.89 6 7 11 7s9.27-3.11 11-7c-1.73-3.89-6-7-11-7zm0 12a5 5 0 1 1 0-10 5 5 0 0 1 0 10z"/>
              </svg>
            </button>
          </div>
        </label>
        <div class="modal-actions mt-4 flex justify-end gap-2">
          <button type="button" id="clearKeyBtn" class="ghost rounded-xl border border-white/10 bg-transparent px-4 py-2 text-zinc-400 hover:bg-zinc-800">Clear</button>
          <button type="submit" class="primary rounded-xl bg-gradient-to-b from-cyan-500 to-blue-600 px-4 py-2 font-semibold text-white shadow-glow hover:brightness-110">Save</button>
        </div>
      </form>
    </dialog>

    <script defer src="app.js"></script>
  </body>
  </html>


